---

title: Replicate

keywords: fastai
sidebar: home_sidebar

summary: "Part of Synchronized-BatchNorm-PyTorch."
description: "Part of Synchronized-BatchNorm-PyTorch."
---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: nbs/replicate.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
        
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="CallbackContext" class="doc_header"><code>class</code> <code>CallbackContext</code><a href="https://github.com/dpoulopoulos/deep_animator/tree/master/deep_animator/sync_batchnorm/replicate.py#L9" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>CallbackContext</code>()</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="execute_replication_callbacks" class="doc_header"><code>execute_replication_callbacks</code><a href="https://github.com/dpoulopoulos/deep_animator/tree/master/deep_animator/sync_batchnorm/replicate.py#L13" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>execute_replication_callbacks</code>(<strong><code>modules</code></strong>)</p>
</blockquote>
<p>Execute an replication callback <code>__data_parallel_replicate__</code> on each module created by original replication.
The callback will be invoked with arguments <code>__data_parallel_replicate__(ctx, copy_id)</code></p>
<p>Note that, as all modules are isomorphism, we assign each sub-module with a context
(shared among multiple copies of this module on different devices).
Through this context, different copies can share some information.</p>
<p>We guarantee that the callback on the master copy (the first copy) will be called ahead of calling the callback
of any slave copies.</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="DataParallelWithCallback" class="doc_header"><code>class</code> <code>DataParallelWithCallback</code><a href="https://github.com/dpoulopoulos/deep_animator/tree/master/deep_animator/sync_batchnorm/replicate.py#L35" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>DataParallelWithCallback</code>(<strong><code>module</code></strong>, <strong><code>device_ids</code></strong>=<em><code>None</code></em>, <strong><code>output_device</code></strong>=<em><code>None</code></em>, <strong><code>dim</code></strong>=<em><code>0</code></em>) :: <code>DataParallel</code></p>
</blockquote>
<p>Data Parallel with a replication callback.</p>
<p>An replication callback <code>__data_parallel_replicate__</code> of each module will be invoked after being created by
original <code>replicate</code> function.
The callback will be invoked with arguments <code>__data_parallel_replicate__(ctx, copy_id)</code></p>
<p>Examples:</p>

<pre><code>&gt; sync_bn = SynchronizedBatchNorm1d(10, eps=1e-5, affine=False)
&gt; sync_bn = DataParallelWithCallback(sync_bn, device_ids=[0, 1])
# sync_bn.__data_parallel_replicate__ will be invoked.</code></pre>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

</div>
 

